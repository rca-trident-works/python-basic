# 20 Python基礎

## mathモジュール

> https://docs.python.org/ja/3.9/library/math.html



### 練習 

#### (1) 三角形の座標を用いた計算

- 2次元平面上で三角形の頂点の座標が与えられた場合に、三角形の面積を計算するプログラムを作成する

  以下の条件に従ってプログラムを作成してください（ren1_1.py）

  - mathモジュールの必要な機能をインポートする
  - 座標を扱うクラスを作成する
  - 与えられた座標を使って各辺の長さを計算する関数を作成する
  - 三角形の面積を計算する関数を作成する
  - ユーザーから三角形の頂点の座標を受け取り、計算結果を出力する
    - 比較的、いろいろな入力を受け処理できるようにする

【実行結果】OKな場合
```
$ python ren1_1.py 
座標を入力してください x,y=0,0
入力された座標は (0.0, 0.0) です。処理を続行します。
座標を入力してください x,y=4 0
入力された座標は (4.0, 0.0) です。処理を続行します。
座標を入力してください x,y=0 3
入力された座標は (0.0, 3.0) です。処理を続行します。
三角形の面積=6.0
```

【実行結果】入力NGな場合

```
$ python ren1_1.py 
座標を入力してください x,y=1-2 
入力が正しい形式ではありません。再度入力してください。
座標を入力してください x,y=1,2,3
入力が正しい形式ではありません。再度入力してください。
座標を入力してください x,y=
```



【作業の手順】

- 作成に必要となりそうなモジュール・メソッドを調査する
- （面積を求める方法の）アルゴリズムに関して調査する
- クラスの構成を考える（設計する）
- プロトタイプを作成し、アルゴリズム、流れの検証を行う
- エラー処理を考慮し、対策を付加する
- 生成AIもしくは対人にて、コードレビューを行ない、問題点があれば修正する



#### (2) 数学アルゴリズムの実装

- Taylor展開（Maclaurin級数）を使用して、sin(x)の近似値を計算するプログラムを作成する
  以下の条件に従ってプログラムを作成してください（ren1_2.py）
  
  - ユーザーから角度（度数法）を入力として受け取る
  - n次までのTaylor展開を用いてsin(x)を計算する
  - 結果を`math.sin()`と比較して誤差を表示する
- Tailor（テイラー）展開（マクローリン展開）について調べ、理解してください
  
  > https://ja.wikipedia.org/wiki/%E3%83%86%E3%82%A4%E3%83%A9%E3%83%BC%E5%B1%95%E9%96%8B
  
  - 多項式の微分については、復習・学習を行っておくと良いです
  - 計算する次数を上げていくと、精度が高くなっていくのを確認してください

【実行結果】

```
角度（度）を入力してください: 30
Taylor展開の次数を入力してください: 5
近似値(1): 0.49967417939436376
近似値(2): 0.5000021325887924
近似値(3): 0.4999999918690232
近似値(4): 0.5000000000202799
近似値(5): 0.4999999999999643
真値: 0.49999999999999994
誤差: 3.5638159090467525e-14
```



```
角度（度）を入力してください: 45
Taylor展開の次数を入力してください: 9
近似値(1): 0.7046526512091675
近似値(2): 0.7071430457793603
近似値(3): 0.7071064695751781
近似値(4): 0.7071067829368671
近似値(5): 0.7071067811796194
近似値(6): 0.7071067811865679
近似値(7): 0.7071067811865475
近似値(8): 0.7071067811865475
近似値(9): 0.7071067811865475
真値: 0.7071067811865475
誤差: 0.0
```




#### (3) 無限級数の計算

- 以下の式で表される計算を行ないます。
  - 無限に発散し、公式はありません。
    $$
    \sum^\infty _{x=1} \frac1{x} = \infty
    $$
- N=100000の時の答えを、なるべく正確に求めてください。(ren1_3.py)

  - デフォルトの桁数
  - 高精度の場合、ほぼ100桁でOK


$$
\sum^{N=100000}_{x=1} \frac1{x} = ?
$$



【実行結果】

```
合計： 12.090146129863408
合計： 12.09014612986342794736321936350421950079369894178220110162752941593818198228230919443164900701935233
```



#### (4) 積分の近似計算

- 以下の定積分を計算する


$$
\int_2^{10}\frac{1}{x}dx
$$




  - 上記の意味は関数$f(x)=\frac{1}{x}$ として、x=2〜10の間の面積を求めるという意味になる。

![image-20240703134117083](20_Python基礎.assets/image-20240703134117083.png)



- 以下の方法でプログラムを作成してください。(ren1_4.py)
  - 矩形近似（長方形を足し合わせる方法）　
  - 台形公式を用いた近似（台形の面積の合計）
  - シンプソン公式を用いた近似（2次曲線で近似）
- それぞれの方法と、真値（上記の$log(5)$）と比較してください。

